function d(r){this.message=r}d.prototype=new Error,d.prototype.name="InvalidCharacterError";var l=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(r){var e=String(r).replace(/=+$/,"");if(e.length%4==1)throw new d("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,t,a=0,o=0,c="";t=e.charAt(o++);~t&&(n=a%4?64*n+t:t,a++%4)?c+=String.fromCharCode(255&n>>(-2*a&6)):0)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t);return c};function p(r){var e=r.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(l(n).replace(/(.)/g,function(t,a){var o=a.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}(e)}catch{return l(e)}}function s(r){this.message=r}function u(r,e){if(typeof r!="string")throw new s("Invalid token specified");var n=(e=e||{}).header===!0?0:1;try{return JSON.parse(p(r.split(".")[n]))}catch(t){throw new s("Invalid token specified: "+t.message)}}s.prototype=new Error,s.prototype.name="InvalidTokenError";const f=()=>{const r=localStorage.getItem("_NOTEU_AUTH").replace(/^"(.*)"$/,"$1");try{const e=u(r),n=e.userId,t=e.username,a=e.memberName,o=e.profile,c=e.roles[0].authority;let i;return c==="ROLE_ADMIN"?i="Admin":c==="ROLE_TEACHER"?i="Teacher":c==="ROLE_STUDENT"&&(i="Student"),{token:r,userId:n,username:t,memberName:a,profile:o,role:c,roleType:i}}catch(e){return console.error("Error decoding token:",e),null}};export{f as e};
