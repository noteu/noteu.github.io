import{r as c,f as j,g as f,h as N,i as b,k as w,m as l,j as e,N as y,P as v,F as L,b as m,c as d,T as I,L as u}from"./index-3a462e11.js";import{P}from"./PasswordInput-27b7ba44.js";import{A as S}from"./AccountWrapper-765b5eb5.js";import{a as k}from"./auth-a940a39c.js";import{u as x}from"./useTranslation-39ff952a.js";import{B as A}from"./Button-c7c76d56.js";import"./InputGroup-85468536.js";import"./InputGroupContext-5be72602.js";const C=w({username:l().matches(/^[a-z0-9]+$/,"영어 소문자와 숫자로 구성해주세요.").required("Please enter ID"),password:l().required("Please enter password")});function E(){const[t,r]=c.useState(!1),a=j(),o=f(),{isAuthenticated:n,saveSession:h}=N(),{showNotification:p}=b(),i=c.useMemo(()=>a.state&&a.state.from?a.state.from.pathname:"/",[a.state]);return{loading:t,login:async g=>{r(!0);try{const s=await k.login(g);s.statusCode||(h({...s.data??{},token:s.headers.authorization}),o(i))}catch(s){console.log(s),p({message:s.toString().slice(s.toString().indexOf(":")+2),type:"error"})}finally{r(!1)}},redirectUrl:i,isAuthenticated:n}}const D=()=>{const{t}=x();return e.jsx(m,{className:"mt-3",children:e.jsx(d,{className:"text-center",children:e.jsxs("p",{className:"text-muted",children:[t("Don't have an account?"),e.jsx(u,{to:"/account/register",className:"text-muted ms-1",children:e.jsx("b",{children:t("Sign Up")})})]})})})};function M(){const{t}=x(),{loading:r,login:a,redirectUrl:o,isAuthenticated:n}=E();return e.jsxs(e.Fragment,{children:[n&&e.jsx(y,{to:o,replace:!0}),e.jsx(v,{title:"Login"}),e.jsxs(S,{bottomLinks:e.jsx(D,{}),children:[e.jsxs("div",{className:"text-center w-75 m-auto",children:[e.jsx("h4",{className:"text-dark-50 text-center mt-0 fw-bold",children:t("")}),e.jsx("p",{className:"text-muted mb-4",children:t("Enter your ID and password to access NOTEU service.")})]}),e.jsxs(L,{onSubmit:a,schema:C,children:[e.jsx(m,{children:e.jsx(d,{children:e.jsx(I,{name:"username",label:t("ID"),type:"text",placeholder:t("Enter your ID"),containerClass:"mb-3"})})}),e.jsx(P,{label:t("Password"),name:"password",placeholder:t("Enter your password"),containerClass:"mb-3",children:e.jsx(u,{to:"/account/recover-password",className:"text-muted float-end",children:e.jsx("small",{children:"Forgot your password?"})})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsx(A,{variant:"primary",type:"submit",disabled:r,children:t("Log In")})})]})]})]})}export{M as default};
