import{r as y,g as C,h as w,i as P,k as v,m as r,n as k,o as E,p as I,j as e,q as R,s as d,N as A,P as L,F as T,T as u,b as q,c as $,L as F}from"./index-3a462e11.js";import{C as S}from"./CheckInput-20c632dc.js";import{P as b}from"./PasswordInput-27b7ba44.js";import{A as B}from"./AccountWrapper-765b5eb5.js";import{a as D}from"./auth-a940a39c.js";import{u as x}from"./useTranslation-39ff952a.js";import{B as O}from"./Button-c7c76d56.js";import"./InputGroup-85468536.js";import"./InputGroupContext-5be72602.js";function U(){const[s,t]=y.useState(!1),{t:a}=x(),i=C(),{isAuthenticated:n}=w(),{showNotification:o}=P(),c=v().shape({username:r().required(a("Please enter ID.")),password:r().required(a("Please enter password.")).min(8,"Password is too short - should be 8 chars minimum.").matches(/[a-zA-Z]/,"Password can only contain latin letters."),confirmPassword:r().oneOf([k("password")],"Passwords must match."),memberName:r().required(a("Please enter name.")),email:r().email("Please enter valid email.").required(a("Please enter email.")),tel:E().required(a("Please enter mobile.")),role:r().required(a("Please choose type.")),checkbox:I().required("You must agree before submitting.")});return{loading:s,register:async m=>{console.log("sign-up!!"),t(!0);try{console.log(m),(await D.register(m)).status===201&&(o({message:"Registration successful. Welcome aboard!",type:"success"}),i("/account/login"))}catch(l){console.log(l),o({message:l.toString(),type:"error"})}finally{t(!1)}},isAuthenticated:n,schema:c}}function j({name:s,id:t,control:a,className:i,containerClass:n,label:o,helpText:c,errors:g,value:m,...l}){return e.jsx(R,{name:s,control:a,render:({field:h,fieldState:f})=>{var p;return e.jsx(d.Group,{className:`${n} d-flex gap-1`,children:e.jsxs("div",{className:"form-check form-check-inline",children:[e.jsx(d.Check,{type:"radio",id:t??s,...l,...h,value:m,onChange:N=>{h.onChange(N.target.value)},isInvalid:!!((p=f.error)!=null&&p.message)}),o&&e.jsx(d.Label,{htmlFor:t??s,children:o}),c&&e.jsx(d.Text,{id:`${s}-help`,muted:!0,children:c})]})})}})}const W=()=>{const{t:s}=x();return e.jsx(q,{className:"mt-3",children:e.jsx($,{className:"text-center",children:e.jsxs("p",{className:"text-muted",children:[s("Already have account?"),e.jsx(F,{to:"/account/login",className:"text-muted ms-1",children:e.jsx("b",{children:s("Log In")})})]})})})};function Q(){const{t:s}=x(),{loading:t,register:a,isAuthenticated:i,schema:n}=U();return e.jsxs(e.Fragment,{children:[i&&e.jsx(A,{to:"/",replace:!0}),e.jsx(L,{title:"Register"}),e.jsxs(B,{bottomLinks:e.jsx(W,{}),children:[e.jsxs("div",{className:"text-center m-auto",children:[e.jsx("h4",{className:"text-dark-50 text-center mt-0 fw-bold",children:s("Sign Up")}),e.jsxs("p",{className:"text-muted mb-4",children:[s("Don't have an account?"),e.jsx("br",{}),s("Create your account, it takes less than a minute!")]})]}),e.jsxs(T,{onSubmit:a,schema:n,children:[e.jsx(u,{label:s("ID"),type:"text",name:"username",placeholder:s("Enter your ID"),containerClass:"mb-3"}),e.jsx(b,{label:s("Password"),name:"password",placeholder:s("Enter password"),containerClass:"mb-2"}),e.jsx(b,{label:s("Confirm Password"),name:"confirmPassword",placeholder:s("Confirm password"),containerClass:"mb-3"}),e.jsx(u,{label:s("Name"),type:"text",name:"memberName",placeholder:s("Enter your name"),containerClass:"mb-3"}),e.jsx(u,{label:s("Email address"),type:"text",name:"email",placeholder:s("Enter your email"),containerClass:"mb-3"}),e.jsx(u,{label:s("Mobile"),type:"text",name:"tel",placeholder:s("Enter your mobile"),containerClass:"mb-3"}),e.jsx("label",{htmlFor:"role",className:"form-label",children:"Type"}),e.jsxs("div",{id:"role",className:"mb-3 d-flex justify-content-center",children:[e.jsx("div",{className:"mx-2",children:e.jsx(j,{type:"radio",name:"role",id:"teacher",value:"ROLE_TEACHER",className:"mx-2",label:"Teacher"})}),e.jsx("div",{className:"mx-2",children:e.jsx(j,{type:"radio",name:"role",id:"student",value:"ROLE_STUDENT",className:"mx-2",label:"Student"})})]}),e.jsx(S,{name:"checkbox",type:"checkbox",containerClass:"mb-2",label:e.jsxs(e.Fragment,{children:["I accept",e.jsx("span",{className:"text-muted cursor-pointer ms-1",children:"Terms and Conditions"})]}),defaultChecked:!0}),e.jsx("div",{className:"mb-3 text-center",children:e.jsx(O,{variant:"primary",type:"submit",disabled:t,children:s("Sign Up")})})]})]})]})}export{Q as default};
