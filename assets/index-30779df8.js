import{g as j,k as b,m as p,t as R,aR as g,r as C,j as e,P as F,b as l,c,d as h,F as T,T as y,aS as S,s as u,q as N,b9 as q}from"./index-3a462e11.js";import{B as f}from"./Button-c7c76d56.js";function w(){const i=j();return{schema:b().shape({title:p().required("Title is required"),content:p().required("Content is required")}),handleValidSubmit:async(n,s)=>{const m=localStorage.getItem("_NOTEU_AUTH").replace(/^"(.*)"$/,"$1"),o=new FormData,r={referenceRoomTitle:n.title,referenceRoomContent:n.content};console.log(n.title),console.log(n.content);const a=new Blob([JSON.stringify(r)],{type:"application/json"});if(o.append("addRequestReferenceRoomDTO",a),!s||s.length===0){alert("파일을 1개 이상 추가해주세요.");return}else s.forEach(t=>{o.append("referenceFile",t),console.log(t)});try{const t=await R.post("http://localhost:8081/subjects/1/references",o,{headers:{Authorization:`${m}`,"Content-Type":"multipart/form-data"}});t.status===201?(alert("자료실 게시글 작성이 완료되었습니다."),i("/apps/referenceRoom/list")):console.log("error : "+t.status)}catch(t){console.log("error : "+t)}}}}const $=()=>{const{schema:i,handleValidSubmit:d}=w(),{control:x}=g(),[n,s]=C.useState([]),m=j(),o=()=>{confirm("작성중인 내용은 저장되지 않습니다. 정말 취소하시겠습니까?")&&m("/apps/referenceRoom/list")};return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Create ReferenceRoom",subName:"ReferenceRoom"}),e.jsx(l,{children:e.jsx(c,{children:e.jsx(h,{children:e.jsx(h.Body,{children:e.jsx(l,{children:e.jsx(c,{children:e.jsxs(T,{onSubmit:r=>d(r,n),schema:i,children:[e.jsx(l,{children:e.jsxs(c,{xl:12,children:[e.jsx(y,{type:"text",name:"title",id:"title",label:"Title",placeholder:"Enter reference title",containerClass:"mb-3"},"referenceRoomTitle"),e.jsx(S,{name:"content",id:"content",label:"Content",placeholder:"Enter some brief about reference..",rows:5,containerClass:"mb-3"},"referenceRoomContent"),e.jsxs(u.Group,{className:"mb-3 mt-3 mt-xl-0",children:[e.jsx(u.Label,{children:"Files"}),e.jsx("p",{className:"text-muted font-14",children:"Recommended thumbnail size 800x400 (px)."}),e.jsx(N,{name:"selectedFiles",control:x,defaultValue:[],render:({field:r})=>e.jsx(q,{...r,onFileUpload:a=>{s(a),r.onChange(a)}})})]})]})}),e.jsx(l,{className:"mt-2",children:e.jsx(c,{children:e.jsxs("div",{className:"button-list d-flex flex-wrap gap-2",children:[e.jsx(f,{type:"submit",variant:"primary",children:"Create"}),e.jsx(f,{variant:"danger",onClick:o,children:"Cancel"})]})})})]})})})})})})})]})};export{$ as default};
