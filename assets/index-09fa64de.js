import{j as e,d as r,b as u,t as m,bf as p,r as h,g as x,P as j,c as b}from"./index-3a462e11.js";import{B as f}from"./Button-c7c76d56.js";import{C as N}from"./CardTitle-b93d986a.js";import"./Dropdown-0297e4c2.js";import"./import-beaed125.js";import"./useCallbackRef-aedf03a1.js";import"./mergeOptionsWithPopperConfig-67b37497.js";import"./InputGroupContext-5be72602.js";const g=a=>{const{reference:s}=a,d=localStorage.getItem("_NOTEU_AUTH").replace(/^"(.*)"$/,"$1"),c=(t,l)=>{m.get(`http://localhost:8081/subjects/1/references/down?id=${t}&referenceName=${l}`,{headers:{Authorization:d},responseType:"blob"}).then(n=>{if(n.status===200){const o=window.URL.createObjectURL(new Blob([n.data])),i=document.createElement("a");i.href=o,i.setAttribute("download",l),document.body.appendChild(i),i.click()}else console.log("error : "+n.status)})};return e.jsx(r,{children:e.jsxs(r.Body,{children:[e.jsx("h5",{className:"card-title mb-3",children:"DownLoadFiles"}),s==null?void 0:s.map(t=>e.jsx(r,{className:"mb-1 shadow-none border",children:e.jsx("div",{className:"p-2",children:e.jsxs(u,{className:"align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"avatar-sm",children:e.jsx("span",{className:"avatar-title rounded",children:t.referenceType.split("/")[0]})})}),e.jsxs("div",{className:"col ps-0",children:[e.jsx("div",{className:"text-muted fw-bold",children:t.referenceName}),e.jsxs("p",{className:"mb-0",children:[t.referenceSize," MB"]})]}),e.jsx("div",{className:"col-auto",children:e.jsx(f,{variant:"link",className:"btn btn-link btn-lg text-muted",onClick:()=>c(t.id,t.referenceName),children:e.jsx("i",{className:"ri-download-2-line"})})})]})})},t.id))]})})},B=()=>{const{referenceRoomId:a}=p(),[s,d]=h.useState(null),c=localStorage.getItem("_NOTEU_AUTH").replace(/^"(.*)"$/,"$1"),t=x();h.useEffect(()=>{m.get(`http://localhost:8081/subjects/1/references/${a}`,{headers:{Authorization:c},withCredentials:!0}).then(o=>{o.status===200?d(o.data):console.log("error : "+o.status)})},[]);const l=()=>{t(`/apps/referenceRoom/update/${a}`)},n=async()=>{try{const o=await m.delete(`http://localhost:8081/subjects/1/references/${a}`,{headers:{Authorization:c}});console.log(o.status),t("/apps/referenceRoom/list")}catch(o){console.log("error : "+o)}};return e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"ReferenceRoom Detail",subName:"ReferenceRoom"}),e.jsx(u,{children:e.jsx(b,{children:e.jsx(r,{className:"d-block",children:e.jsxs(r.Body,{children:[e.jsx(N,{containerClass:"d-flex justify-content-between align-items-center mb-2",icon:"ri-more-fill",title:e.jsx("h3",{children:s?s.referenceRoomTitle:"Loding..."}),menuItems:[{label:"Edit",icon:"mdi mdi-pencil",onClick:l},{label:"Delete",icon:"mdi mdi-delete",onClick:n}]}),e.jsx("p",{className:"text-muted mb-2",children:s?s.referenceRoomContent:"Loding..."}),e.jsx(g,{reference:s?s.reference:[]})]})})})})]})};export{B as default};
